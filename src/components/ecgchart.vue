<template>
    <!-- <div id="section" class="fill"></div> -->
    <div style="margin-top: 15px;">
      <section class="section"></section>
      <!-- <canvas id="mycanvas" height="300"></canvas> -->
    </div>
</template>

<script>
import {lightningChart,
            DataPatterns,
            AxisScrollStrategies,
            SolidLine,
            SolidFill,
            ColorHEX,
            AutoCursorModes,
            Themes} from '@arction/lcjs'
import { createSampledDataGenerator } from '@arction/xydata';
// import {SmoothieChart, TimeSeries} from '../../public/ecg';
let lineSeries = null
export default {
  name: 'EcgChart',
  props: ['d'],
  data(){
    this.chart = null
    return{
        data: [16299281, 16299281, 16298753, 16298177, 16297578, 16296323, 16296323, 16295707, 16295160, 16294580, 16293734, 16293734, 16293285, 16292870, 16292394, 16292124, 16291525, 16291525, 16291133, 16290882, 16290699, 16290317, 16290317, 16290154, 16290025, 16289965, 16289649, 16289649, 16289551, 16289440, 16289420, 16289295, 16289295, 16289225, 16289203, 16289169, 16289118, 16289118, 16289139, 16289152, 16289044, 16288982, 16288982, 16289001, 16288962, 16288927, 16289007, 16288880, 16288880, 16288814, 16288845, 16288850, 16289007, 16289007, 16288863, 16288855, 16288931, 16288840, 16288840, 16288779, 16288892, 16288940, 16288980, 16288980, 16288965, 16288963, 16289025, 16289182, 16289182, 16289082, 16289180, 16289295, 16289195, 16289195, 16289194, 16289290, 16289192, 16289274, 16289357, 16289357, 16289349, 16289385, 16289327, 16289345, 16289345, 16289354, 16289434, 16289578, 16289437, 16289437, 16289393, 16289382, 16289339, 16289270, 16289270, 16289255, 16289295, 16289250, 16289252, 16289252, 16289320, 16289373, 16289362, 16289177, 16289177, 16289209, 16289279, 16289322, 16289309, 16289337, 16289337, 16289390, 16289329, 16289207, 16289228, 16289228, 16289110, 16289002, 16289033, 16289019, 16289019, 16288967, 16288916, 16288906, 16288895, 16288895, 16288869, 16288900, 16288889, 16288924, 16288924, 16288820, 16288835, 16288859, 16288740, 16288740, 16288684, 16288690, 16288736, 16288778, 16288816, 16288816, 16288815, 16288822, 16288729, 16288769, 16288769, 16288737, 16288687, 16288722, 16288670, 16288670, 16288792, 16288773, 16288755, 16288637, 16288637, 16288526, 16288513, 16288610, 16288693, 16288693, 16288719, 16288705, 16288568, 16288499, 16288499, 16288505, 16288487, 16288540, 16288610, 16288579, 16288579, 16288558, 16288564, 16288582, 16288584, 16288584, 16288619, 16288588, 16288577, 16288565, 16288565, 16288628, 16288629, 16288534, 16288521, 16288521, 16288589, 16288652, 16288634, 16288687, 16288687, 16288585, 16288531, 16288569, 16288577, 16288577, 16288562, 16288600, 16288544, 16288471, 16288478, 16288478, 16288580, 16288599, 16288502, 16288577, 16288577, 16288502, 16288463, 16288578, 16288517, 16288517, 16288535, 16288563, 16288625, 16288527, 16288527, 16288645, 16288750, 16288734, 16288696, 16288696, 16288732, 16288486, 16288379, 16288350, 16288350, 16288325, 16288281, 16288354, 16288334, 16288374, 16288374, 16288371, 16288440, 16288521, 16288430, 16288430, 16288350, 16288299, 16288365, 16288015, 16288015, 16287760, 16287742, 16287894, 16287789, 16287789, 16287759, 16287895, 16287940, 16287912, 16287912, 16288077, 16288349, 16288681, 16288972, 16288972, 16288899, 16288795, 16288809, 16288895, 16289107, 16289107, 16289224, 16289239, 16289060, 16288890, 16288890, 16288821, 16288669, 16288494, 16288654, 16288654, 16288624, 16288595, 16288565, 16288348, 16288348, 16288257, 16288269, 16288332, 16288276, 16288276, 16288262, 16288429, 16288367, 16288447, 16288447, 16288443, 16288342, 16288475, 16288507, 16288511, 16288511, 16288465, 16288504, 16288457, 16288424, 16288424, 16288411, 16288409, 16288362, 16288425, 16288425, 16288505, 16288509, 16288491, 16288721, 16288721, 16290163, 16291511, 16292671, 16296084, 16296084, 16297869, 16297232, 16295803, 16289582, 16289582, 16286302, 16281801, 16275939, 16269359, 16263489, 16263489, 16261749, 16260182, 16256124, 16256654, 16256654, 16261612, 16266449, 16270672, 16277157, 16277157, 16279763, 16281112, 16281365, 16282790, 16282790, 16283633, 16284677, 16285820, 16287407, 16287407, 16287972, 16288400, 16288686, 16289260, 16289260, 16289512, 16289698, 16289879, 16290047, 16290369, 16290369, 16290503, 16290642, 16290754, 16290959, 16290959, 16291095, 16291184, 16291293, 16291549, 16291549, 16291632, 16291732, 16291873, 16291991, 16291991, 16292174, 16292355, 16292414, 16292578, 16292578, 16292660, 16292744, 16292832, 16293099, 16293099, 16293209, 16293310, 16293503, 16293664, 16293984, 16293984, 16294175, 16294249, 16294370, 16294825, 16294825, 16294867, 16294944, 16295061, 16295558, 16295558, 16295752, 16295984, 16296215, 16296837, 16296837, 16297067, 16297289, 16297499, 16297978, 16297978, 16298252, 16298480, 16298820, 16299394, 16299394, 16299714, 16300051, 16300291, 16300524, 16301092, 16301092, 16301338, 16301619, 16301932, 16302353, 16302353, 16302604, 16302825, 16303017, 16303346, 16303346, 16303551, 16303728, 16303927, 16303960, 16303960, 16303929, 16303846, 16303844, 16303483, 16303483, 16303252, 16303040, 16302812, 16302143, 16302143, 16301737, 16301267, 16300795, 16300409, 16299385, 16299385, 16298857, 16298215, 16297630, 16296510, 16296510, 16295870, 16295296, 16294644, 16293703, 16293703, 16293336, 16292935, 16292414, 16291711, 16291711, 16291454, 16291069, 16290839, 16290347, 16290347, 16290238, 16290055, 16289852, 16289478, 16289478, 16289307, 16289205, 16289188, 16289132, 16289052, 16289052, 16288955, 16288888, 16288855, 16288745, 16288745, 16288644, 16288659, 16288690, 16288614, 16288614, 16288537, 16288547, 16288555, 16288561, 16288561, 16288569, 16288559, 16288531, 16288532, 16288532, 16288609, 16288596, 16288621, 16288505, 16288505, 16288554, 16288653, 16288624, 16288588, 16288594, 16288594, 16288582, 16288596, 16288626, 16288653, 16288653, 16288660, 16288762, 16288858, 16288860, 16288860, 16288764, 16288769, 16288780, 16288865, 16288865, 16288820, 16288884, 16288922, 16288987, 16288987, 16289017, 16289016, 16289032, 16289067, 16289067, 16289133, 16289115, 16289064, 16288987, 16288987, 16288987, 16288957, 16288964, 16288996, 16289060, 16289060, 16289070, 16289056, 16289035, 16289021, 16289021, 16289057, 16289126, 16289106, 16289032, 16289032, 16289047, 16289010, 16288934, 16288870, 16288870, 16288886, 16288933, 16288924, 16288833, 16288833, 16288819, 16288809, 16288859, 16288836, 16288790, 16288790, 16288700, 16288661, 16288675, 16288724, 16288724, 16288712, 16288757, 16288755, 16288531, 16288531, 16288559, 16288591, 16288657, 16288669, 16288669, 16288606, 16288520, 16288462, 16288497, 16288497, 16288535, 16288533, 16288566, 16288555, 16288555, 16288522, 16288421, 16288414, 16288361, 16288433, 16288433, 16288405, 16288419, 16288399, 16288482, 16288482, 16288420, 16288399, 16288430, 16288458, 16288458, 16288407, 16288405, 16288399, 16288365, 16288365, 16288379, 16288365, 16288361, 16288337, 16288337, 16288307, 16288303, 16288343, 16288394, 16288394, 16288355, 16288214, 16288304, 16288295, 16288412, 16288412, 16288426, 16288279, 16288209, 16288327, 16288327, 16288334, 16288314, 16288315, 16288272, 16288272, 16288242, 16288262, 16288293, 16288275, 16288275, 16288197, 16288269, 16288265, 16288219, 16288219, 16288208, 16288272, 16288222, 16288157, 16288157, 16288160, 16288148, 16288162, 16288154, 16288250, 16288250, 16288258, 16288252, 16288230, 16288182, 16288182, 16288184, 16288222, 16288226, 16288160, 16288160, 16288214, 16288156, 16288155, 16288193, 16288193, 16288243, 16288275, 16288317, 16288155, 16288155, 16288179, 16288221, 16288177, 16288154, 16288154, 16288119, 16288189, 16288140, 16288175, 16288194, 16288194, 16288150, 16288188, 16288187, 16288130, 16288130, 16288115, 16288149, 16288155, 16288147, 16288147, 16288167, 16288180, 16288124, 16288114, 16288114, 16288132, 16288030, 16287960, 16287747, 16287747, 16287529, 16287362, 16287400, 16287362, 16287362, 16287327, 16287475, 16287495, 16287521, 16287814, 16287814, 16288172, 16288534, 16288755, 16288722, 16288722, 16288573, 16288577, 16288659, 16288822, 16288822, 16288946, 16288917, 16288766, 16288601, 16288601, 16288564, 16288591, 16288531, 16288367, 16288367, 16288368, 16288325, 16288302, 16288192, 16288192, 16288098, 16288087, 16288110, 16288084, 16288126, 16288126, 16288120, 16288139, 16288153, 16288069, 16288069, 16288159, 16288229, 16288196, 16288128, 16288128, 16288209, 16288189, 16288214, 16288264, 16288264, 16288304, 16288261, 16288149, 16288109, 16288109, 16288126, 16288124, 16288141, 16288469, 16288469, 16289560, 16290501, 16291692, 16293352, 16295974, 16295974, 16296093, 16295392, 16293434, 16285345, 16285345, 16281095, 16275207, 16268937, 16261666, 16261666, 16260074, 16260165, 16257204, 16254777, 16254777, 16259520, 16264745, 16269804, 16277242, 16277242, 16279650, 16280635, 16281095, 16282679, 16282679, 16283786, 16284921, 16285865, 16286646, 16287964, 16287964, 16288314, 16288568, 16288809, 16289326, 16289326, 16289560, 16289695, 16289906, 16290302, 16290302, 16290413, 16290515, 16290580, 16290937, 16290937, 16291104, 16291170, 16291355, 16291569, 16291569, 16291674, 16291810, 16291944, 16292097, 16292097, 16292187, 16292284, 16292390, 16292488, 16292682, 16292682, 16292744, 16292831, 16293069, 16293310, 16293310, 16293467, 16293674, 16293775, 16294024, 16294024, 16294208, 16294434, 16294510, 16294837, 16294837, 16295016, 16295239, 16295430, 16295855, 16295855, 16296060, 16296232, 16296484, 16297027, 16297027, 16297234, 16297473, 16297832, 16298084, 16298664, 16298664, 16298972, 16299232, 16299495, 16300084, 16300084, 16300472, 16300717, 16300999, 16301649, 16301649, 16301924, 16302184, 16302503, 16303014, 16303014, 16303235, 16303562, 16303759, 16304202, 16304202, 16304393, 16304532, 16304642, 16304785, 16304785, 16304863, 16304787, 16304707, 16304645, 16304288, 16304288, 16304049, 16303774, 16303465, 16302740, 16302740, 16302365, 16301959, 16301490, 16300404, 16300404, 16299827, 16299223, 16298748, 16297392, 16297392, 16296834, 16296251, 16295635, 16294655, 16294655, 16294052, 16293595, 16293075, 16292354, 16292354, 16291947, 16291564, 16291194, 16290916, 16290409, 16290409, 16290152, 16289997, 16289827, 16289557, 16289557, 16289424, 16289330, 16289179, 16289004, 16289004, 16288960, 16288854, 16288885, 16288816, 16288816, 16288781, 16288723, 16288682, 16288578, 16288578, 16288562, 16288570, 16288576, 16288524, 16288524, 16288509, 16288525, 16288529, 16288532, 16288634, 16288634, 16288602, 16288585, 16288582, 16288642, 16288642, 16288565, 16288540, 16288599, 16288585, 16288585, 16288551, 16288555, 16288600, 16288699, 16288699, 16288709, 16288750, 16288706, 16288735, 16288735, 16288761, 16288776, 16288732, 16288802, 16288802, 16288824, 16288820, 16288881, 16288827, 16288915, 16288915, 16288843, 16288799, 16288825, 16288866, 16288866, 16288799, 16288751, 16288795, 16288856, 16288856, 16288905, 16288917, 16288918, 16288869, 16288869, 16288859, 16288843, 16288798, 16288824, 16288824, 16288814, 16288810, 16288859, 16288812, 16288812, 16288738, 16288665, 16288686, 16288754, 16288740, 16288740, 16288695, 16288666, 16288589, 16288514, 16288514, 16288514, 16288491, 16288560, 16288555, 16288555, 16288475, 16288414, 16288430, 16288355, 16288355, 16288365, 16288342, 16288309, 16288257, 16288257, 16288335, 16288412, 16288310, 16288330, 16288330, 16288345, 16288382, 16288314, 16288312, 16288220, 16288220, 16288195, 16288232, 16288202, 16288160, 16288160, 16288194, 16288217, 16288188, 16288079, 16288079, 16288093, 16288085, 16288055, 16288051, 16288051, 16288125, 16288132, 16288170, 16288224, 16288224, 16288206, 16288146, 16288192, 16288194, 16288194, 16288162, 16288103, 16288096, 16288154, 16288162, 16288162, 16288036, 16287985, 16288072, 16288110, 16288110, 16288022, 16287904, 16287915, 16288105, 16288105, 16288077, 16288120, 16288048, 16288074, 16288074, 16288098, 16288081, 16288047, 16287947, 16287947, 16288022, 16288000, 16288031, 16287957, 16287957, 16287953, 16288008, 16288030, 16287952, 16287942, 16287942, 16288031, 16288048, 16288078, 16288029, 16288029, 16288012, 16288020, 16288066, 16288091, 16288091, 16287997, 16288009, 16288033, 16288050, 16288050, 16288015, 16287969, 16287899, 16287970, 16287970, 16288021, 16288078, 16288020, 16288059, 16288059, 16288068, 16288067, 16288044, 16288000, 16287967, 16287967, 16287894, 16287989, 16287975, 16287947, 16287947, 16287951, 16287920, 16287958, 16288014, 16288014, 16288001, 16288074, 16288176, 16287975, 16287975, 16287942, 16287913, 16287869, 16287990, 16287990, 16288046, 16287973, 16288012, 16288033, 16288033, 16288047, 16288027, 16287964, 16287926, 16288039, 16288039, 16287994, 16287956, 16287921, 16287709, 16287709, 16287454, 16287265, 16287230, 16287237, 16287237, 16287212, 16287067, 16287124, 16287140, 16287140, 16287219, 16287496, 16287781, 16288277, 16288277, 16288392, 16288481, 16288409, 16288409, 16288409, 16288562, 16288727, 16288770, 16288797, 16288531, 16288531, 16288434, 16288419, 16288273, 16288043, 16288043, 16288004, 16287934, 16288011, 16287989, 16287989, 16287842, 16287849, 16287882, 16287928, 16287928, 16287999, 16288037, 16288083, 16288053, 16288053, 16287974, 16287985, 16287967, 16288039, 16288039, 16288064, 16288045, 16288082, 16288213, 16288062, 16288062, 16288047, 16288058, 16288034, 16287985, 16287985, 16287959, 16287940, 16287968, 16288091, 16288091, 16288897, 16290595, 16291714, 16294673, 16294673, 16296355, 16297400, 16296780, 16292567, 16292567, 16288418, 16284729, 16279420, 16266305, 16266305, 16263302, 16261287, 16259379, 16257041, 16252262, 16252262, 16256458, 16262161, 16266914, 16274402, 16274402, 16277552, 16279824, 16280765, 16281817, 16281817, 16282747, 16283634, 16284755, 16286697, 16286697, 16287277, 16287860, 16288374, 16288981, 16288981, 16289200, 16289432, 16289575, 16289999, 16289999, 16290160, 16290245, 16290314, 16290559, 16290827, 16290827, 16290900, 16291116, 16291206, 16291397, 16291397, 16291524, 16291595, 16291645, 16291783, 16291783, 16291947, 16292053, 16292207, 16292462, 16292462, 16292596, 16292572, 16292767, 16293042, 16293042, 16293080, 16293362, 16293609, 16293666, 16293666, 16293804, 16293960, 16294025, 16294289, 16294596, 16294596, 16294885, 16295058, 16295192, 16295574, 16295574, 16295747, 16295990, 16296135, 16296697, 16296697, 16296937, 16297159, 16297380, 16297898, 16297898, 16298184, 16298512, 16298774, 16299460, 16299460, 16299757, 16299962, 16300300, 16300910, 16300910, 16301254, 16301549, 16301854, 16302235, 16302714, 16302714, 16303003, 16303270, 16303510, 16303837, 16303837, 16303997, 16304178, 16304313, 16304429, 16304429, 16304452, 16304544, 16304472, 16304245, 16304245, 16304185, 16304028, 16303824, 16303070, 16303070, 16302701, 16302302, 16301860, 16300754, 16300754, 16300209, 16299740, 16299131, 16298482, 16297299, 16297299, 16296761, 16296209, 16295627, 16294563, 16294563, 16294074, 16293637, 16293209, 16292374, 16292374, 16291992, 16291562, 16291179, 16290790, 16290790, 16290534, 16290367, 16290027, 16289514, 16289514, 16289407, 16289374, 16289231, 16288991, 16288991, 16289021, 16288980, 16288947, 16288905, 16288836, 16288836, 16288722, 16288643, 16288635, 16288729, 16288729, 16288723, 16288535, 16288450, 16288516, 16288516, 16288496, 16288495, 16288607, 16288710, 16288710, 16288721, 16288685, 16288582, 16288612, 16288612, 16288536, 16288461, 16288595, 16288809, 16288809, 16288724, 16288753, 16288690, 16288682, 16288706, 16288706, 16288689, 16288717, 16288736, 16288883, 16288883, 16288945, 16288972, 16288922, 16288909, 16288909, 16288920, 16289002, 16289001, 16289048, 16289048, 16288958, 16289026, 16289077, 16289099, 16289099, 16289045, 16289064, 16289156, 16289183, 16289183, 16289249, 16289283, 16289176, 16289157, 16289167, 16289167, 16289194, 16289158, 16289159, 16289172, 16289172, 16289119, 16289037, 16289108, 16289147, 16289147, 16289021, 16289049, 16289031, 16288967, 16288967, 16288964, 16288951, 16288868, 16288967, 16288967, 16288909, 16288936, 16288956, 16288874, 16288874, 16288852, 16288772, 16288834, 16288827, 16288838, 16288838, 16288778, 16288844, 16288919, 16288798, 16288798, 16288856, 16288734, 16288750, 16288697, 16288697, 16288649, 16288622, 16288685, 16288643, 16288643, 16288617, 16288645, 16288565, 16288640, 16288640, 16288641, 16288710, 16288634, 16288625, 16288625, 16288704, 16288678, 16288616, 16288580, 16288582, 16288582, 16288567, 16288659, 16288609, 16288567, 16288567, 16288607, 16288590, 16288689, 16288658, 16288658, 16288654, 16288607, 16288610, 16288569, 16288569, 16288634, 16288587, 16288607, 16288561, 16288561, 16288499, 16288542, 16288559, 16288607, 16288607, 16288459, 16288432, 16288494, 16288518, 16288528, 16288528, 16288537, 16288544, 16288477, 16288476, 16288476, 16288479, 16288610, 16288660, 16288430, 16288430, 16288416, 16288372, 16288398, 16288357, 16288357, 16288392, 16288427, 16288452, 16288402, 16288402, 16288371, 16288311, 16288247, 16288347, 16288347, 16288373, 16288368, 16288320, 16288369, 16288285, 16288285, 16288317, 16288273, 16288223, 16288286, 16288286, 16288281, 16288319, 16288326, 16288060, 16288060, 16287829, 16287754, 16287716, 16287720, 16287720, 16287566, 16287555, 16287630, 16287655, 16287655, 16287849, 16288063, 16288296, 16288712, 16288712, 16288744, 16288690, 16288582, 16288584, 16288722, 16288722, 16288905, 16288962, 16288996, 16288957, 16288957, 16288890, 16288715, 16288506, 16288352, 16288352, 16288399, 16288343, 16288349, 16288229, 16288229, 16288126, 16288181, 16288177, 16288140, 16288140, 16288195, 16288258, 16288265, 16288173, 16288173, 16288320, 16288404, 16288390, 16288340, 16288321, 16288321, 16288344, 16288384, 16288417, 16288422, 16288422, 16288329, 16288279, 16288249, 16288238, 16288238, 16288278, 16288252, 16288262, 16288599, 16288599, 16289899, 16291560, 16292604, 16295982, 16295982, 16297919, 16297714, 16296259, 16290374, 16290374, 16286639, 16282474, 16276625, 16269942, 16262797, 16262797, 16261019, 16259396, 16255715, 16254844, 16254844, 16259768, 16264964, 16269336, 16276305, 16276305, 16279115, 16280788, 16281188, 16282546, 16282546, 16283559, 16284491, 16285545, 16287248, 16287248, 16287812, 16288491, 16288910, 16289195, 16289195, 16289459, 16289690, 16289870, 16290027, 16290434, 16290434, 16290567, 16290652, 16290929, 16291162, 16291162, 16291259, 16291435, 16291650, 16291777, 16291777, 16291824, 16291917, 16291866, 16292139, 16292139, 16292343, 16292437, 16292564, 16292725, 16292725, 16292879, 16292959, 16293059, 16293205, 16293205, 16293420, 16293482, 16293644, 16293776, 16294034, 16294034, 16294064, 16294188, 16294247, 16294649, 16294649, 16294994],
// data: [],
        xAxisStripLinesArray: [],
        yAxisStripLinesArray: [],
        dps: [],
        dataPointsArray: [],
        k: 1,
        interval: null,
        series: null,
        chart: null
            }
},
  // watch:{
  //     data: function(d){
  //       let self = this
  //       // lineSeries.add(v)
  //       // let old = d[0]
  //       for (let i in d){
  //           self.series.add({x: d[i]['x'], y: d[i]['y']})
  //           d.shift()
  //           // console.log(self.k);
  //           // let mmax = self.series.getYMax()
  //           // let mmin = self.series.getYMin()
  //           // self.chart.getDefaultAxisY()
  //           //   .setTickStrategy("Empty")
  //           //   .setStrokeStyle(emptyLine)
  //           //   .setInterval(mmin, mmax, true)
  //           //   .setScrollStrategy(AxisScrollStrategies.expansion)
  //       }
  //     }
  // },
  created(){
    // this.getData()
  },
  mounted () {
    // this.getData2()
    const lcjs = require('@arction/lcjs')
        const {
            lightningChart,
            DataPatterns,
            AxisScrollStrategies,
            SolidLine,
            SolidFill,
            ColorHEX,
            AutoCursorModes,
            Themes,
            emptyLine,
            emptyTick
        } = lcjs
     const {
        createSampledDataGenerator
    } = require('@arction/xydata')
    this.graf(this.data)
    
    // this.minterval()
    let socket = new WebSocket("wss://back.cardioservice.com.kz/api/setByte/");
    let self = this
 
    socket.onopen = function(e) {
      // socket.send("Меня зовут Джон");
      console.log('open')
    };
    socket.onmessage = function(event) {
      // console.log(event);
      // clearInterval(self.interval)
      let d = JSON.parse(event.data)['content']['pointers']['content']['pointers']
      // console.log(d['content']['pointers']['content']['pointers']);

      console.log(d);
      let p = []
      let old = d[0]
      for (let i=0; i<d.length; i++){
          // if (Math.abs(d[i]-old) < 80000){
          if (d[i] > 10){
            // setTimeout(function(){
            self.k+=3
            // }, 50)
            self.series.add({x: self.k, y: d[i]})
            let mmax = self.series.getYMax() + 20000
            let mmin = self.series.getYMin() - 20000
            self.chart.getDefaultAxisY()
              .setTickStrategy("Empty")
              .setStrokeStyle(emptyLine)
              .setInterval(mmin, mmax, true)
              .setScrollStrategy(AxisScrollStrategies.expansion)
            self.data.push({x: self.k, y: d[i]})
            p.push({x: self.k, y: d[i]})
            // console.log(d[i]);
          }
      }
      // createSampledDataGenerator(p, 1, 10)
      //   .setSamplingFrequency(1)
      //   .setInputData(p)
      //   .generate()
      //   .setStreamBatchSize(48)
      //   .setStreamInterval(50)
      //   .toStream()
      //   .forEach(p => {
      //       // Push the created points to the series.
      //       self.series.add({ x: p.data.x, y: p.data.y })
      //   })
      // self.data = p
      // self.minterval()
      // console.log(self.data)
    };
    socket.onclose = function(event) {
      console.log("close");
    };
    socket.onerror = function(error) {
      console.log(error)
    };
  },
  methods: {
      getData(){
          let self = this
          self.interval = setInterval(function(){
          axios.get('api/setByte/')
            .then(r=>{
                let d = r.data.data
                d = d.substring(1, d.length-1)
                d = d.split(', ')
                let p = []
                for (let i=0; i<d.length; i++){
                    let pp = {x: new Date().getTime(), y: parseInt(d[i])}
                    self.k+=5
                    p.push(pp)
                }
                self.data = p
                console.log(p)
            }, r=>{
                console.log(r)
            })
          }, 1000)
      },
      getData2(){
        $.ajax({
            type: "POST",
            url: "./index.py",
            // data: { param: input },
            success: function(d){
              console.log(d)
            }
        });
      },
      createChart() {
        this.chart = lightningChart().ChartXY({container: "section"})
        this.chart.setAutoCursorMode(AutoCursorModes.disabled)
        this.chart.getDefaultAxisY()
            .setInterval(1000000, 17000000)
            .setScrollStrategy(AxisScrollStrategies.expansion)
        this.chart.getDefaultAxisX()
            .setInterval(0, 800)
            .setScrollStrategy(AxisScrollStrategies.progressive)
        lineSeries = this.chart.addLineSeries({ dataPattern: DataPatterns.horizontalProgressive })
        // Set stroke style of the line
        lineSeries.setStrokeStyle((style) => style.setThickness(3))
        // lineSeries.setMouseInteractions(false)
        // lineSeries.add(data)
       
      },
      graf(p){
        const lcjs = require('@arction/lcjs')
        const {
            lightningChart,
            DataPatterns,
            AxisScrollStrategies,
            SolidLine,
            SolidFill,
            ColorHEX,
            AutoCursorModes,
            Themes,
            emptyLine,
            emptyTick
        } = lcjs

        this.chart = lightningChart().ChartXY({
            // theme: Themes.dark 
        }).setTitle('')
        // Add line series to visualize the data received
        this.series = this.chart.addLineSeries({ dataPattern: DataPatterns.horizontalProgressive })
        // Style the series
        this.series
            .setStrokeStyle(new SolidLine({
                thickness: 2,
                fillStyle: new SolidFill({ color: ColorHEX('#5aafc7') })
            }))
            .setMouseInteractions(false)
        this.chart.setAutoCursorMode(AutoCursorModes.disabled)
        // Setup view nicely.
        this.chart.getDefaultAxisY()
            .setTickStrategy("Empty")
            .setStrokeStyle(emptyLine)
            // .setInterval(16000000, 17000000)
            // .setScrollStrategy(AxisScrollStrategies.progressive)

        this.chart.getDefaultAxisX()
            // .setTickStrategy("Empty")
            // .setStrokeStyle(emptyLine)
            .setInterval(0, 1000, true)
            .setScrollStrategy(AxisScrollStrategies.progressive)
        // Create a data generator to supply a continuous stream of data.

           // Create a data generator to supply a continuous stream of data.
    //        let point=this.data
    // createSampledDataGenerator(point, 1, 10)
    //     .setSamplingFrequency(1)
    //     .setInputData(point)
    //     // .generate()
    //     .setStreamBatchSize(48)
    //     .setStreamInterval(50)
    //     // .setStreamRepeat(true)
    //     .toStream()
    //     .forEach(point => {
    //         // Push the created points to the series.
    //         series.add({ x: point.timestamp, y: point.data.y })
    //     })
        // let old = p[0]
        // for (let i in p){
        //   this.k+=3
        //   // if (Math.abs(p[i]-old) < 2000000){
        //     this.series.add({x: this.k, y: p[i]})  
        //   // }
        // }
        
        var asd = document.querySelector('#lcjs-auto-flexbox')
        asd.style.height = "100%"
        let sec = document.querySelector(".section")
        sec.style.height = "100%"
        asd.style.zIndex = "9"
        sec.appendChild(asd)
      },
      minterval(){
        let self = this
        this.interval = setInterval(function(){
          let mmax = self.series.getYMax()
          let mmin = self.series.getYMin()
          if (mmax && mmin){
            // console.log(mmax);
            let data = (mmax + mmin) / 2
            self.k += 2
            self.series.add({x: self.k, y: data})
          }
        }, 200);
      }
  },
  beforeDestroy() {
    // "dispose" should be called when the component is unmounted to free all the resources used by the chart
    // this.chart.dispose()
    clearInterval(this.interval)
  }
}
</script>

<style scoped>
#section{
  margin-top: 25px
}
.fill {
    height: 100%;
  }
#mycanvas{
  width: 100%;
}
</style>